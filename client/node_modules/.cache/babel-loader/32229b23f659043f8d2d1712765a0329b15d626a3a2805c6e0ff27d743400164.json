{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\shaki\\\\workspaces\\\\my-VS-code-WS\\\\book-store\\\\client\\\\src\\\\contexts\\\\CartContext.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext(undefined);\nexport const CartProvider = ({\n  children\n}) => {\n  _s();\n  const [items, setItems] = useState(() => {\n    try {\n      const raw = localStorage.getItem('cart');\n      return raw ? JSON.parse(raw) : [];\n    } catch {\n      return [];\n    }\n  });\n  const sync = newItems => {\n    setItems(newItems);\n    localStorage.setItem('cart', JSON.stringify(newItems));\n  };\n  const addItem = item => {\n    const exists = items.find(i => i.id === item.id);\n    if (exists) {\n      sync(items.map(i => i.id === item.id ? {\n        ...i,\n        quantity: i.quantity + item.quantity\n      } : i));\n    } else {\n      sync([...items, item]);\n    }\n  };\n  const removeItem = id => {\n    sync(items.filter(i => i.id !== id));\n  };\n  const updateQuantity = (id, qty) => {\n    sync(items.map(i => i.id === id ? {\n      ...i,\n      quantity: qty\n    } : i));\n  };\n  const clear = () => {\n    sync([]);\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      items,\n      addItem,\n      removeItem,\n      updateQuantity,\n      clear\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n};\n_s(CartProvider, \"VZB5yZs7OS/RQA2ZjeLgCs/J1FI=\");\n_c = CartProvider;\nexport const useCart = () => {\n  _s2();\n  const ctx = useContext(CartContext);\n  if (!ctx) throw new Error('useCart must be used within CartProvider');\n  return ctx;\n};\n_s2(useCart, \"/dMy7t63NXD4eYACoT93CePwGrg=\");\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","jsxDEV","_jsxDEV","CartContext","undefined","CartProvider","children","_s","items","setItems","raw","localStorage","getItem","JSON","parse","sync","newItems","setItem","stringify","addItem","item","exists","find","i","id","map","quantity","removeItem","filter","updateQuantity","qty","clear","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useCart","_s2","ctx","Error","$RefreshReg$"],"sources":["C:/Users/shaki/workspaces/my-VS-code-WS/book-store/client/src/contexts/CartContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, ReactNode } from 'react';\r\n\r\nexport interface CartItem {\r\n  id: string;\r\n  title: string;\r\n  price: number;\r\n  quantity: number;\r\n  coverImage?: string;\r\n}\r\n\r\ninterface CartContextProps {\r\n  items: CartItem[];\r\n  addItem: (item: CartItem) => void;\r\n  removeItem: (id: string) => void;\r\n  updateQuantity: (id: string, qty: number) => void;\r\n  clear: () => void;\r\n}\r\n\r\nconst CartContext = createContext<CartContextProps | undefined>(undefined);\r\n\r\nexport const CartProvider: React.FC<{ children: ReactNode }> = ({ children }) => {\r\n  const [items, setItems] = useState<CartItem[]>(() => {\r\n    try {\r\n      const raw = localStorage.getItem('cart');\r\n      return raw ? JSON.parse(raw) : [];\r\n    } catch {\r\n      return [];\r\n    }\r\n  });\r\n\r\n  const sync = (newItems: CartItem[]) => {\r\n    setItems(newItems);\r\n    localStorage.setItem('cart', JSON.stringify(newItems));\r\n  };\r\n\r\n  const addItem = (item: CartItem) => {\r\n    const exists = items.find(i => i.id === item.id);\r\n    if (exists) {\r\n      sync(items.map(i => i.id === item.id ? { ...i, quantity: i.quantity + item.quantity } : i));\r\n    } else {\r\n      sync([...items, item]);\r\n    }\r\n  };\r\n\r\n  const removeItem = (id: string) => {\r\n    sync(items.filter(i => i.id !== id));\r\n  };\r\n\r\n  const updateQuantity = (id: string, qty: number) => {\r\n    sync(items.map(i => i.id === id ? { ...i, quantity: qty } : i));\r\n  };\r\n\r\n  const clear = () => {\r\n    sync([]);\r\n  };\r\n\r\n  return (\r\n    <CartContext.Provider value={{ items, addItem, removeItem, updateQuantity, clear }}>\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useCart = () => {\r\n  const ctx = useContext(CartContext);\r\n  if (!ctx) throw new Error('useCart must be used within CartProvider');\r\n  return ctx;\r\n};\r\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAEC,QAAQ,QAAmB,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAkB9E,MAAMC,WAAW,gBAAGL,aAAa,CAA+BM,SAAS,CAAC;AAE1E,OAAO,MAAMC,YAA+C,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAC/E,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGT,QAAQ,CAAa,MAAM;IACnD,IAAI;MACF,MAAMU,GAAG,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;MACxC,OAAOF,GAAG,GAAGG,IAAI,CAACC,KAAK,CAACJ,GAAG,CAAC,GAAG,EAAE;IACnC,CAAC,CAAC,MAAM;MACN,OAAO,EAAE;IACX;EACF,CAAC,CAAC;EAEF,MAAMK,IAAI,GAAIC,QAAoB,IAAK;IACrCP,QAAQ,CAACO,QAAQ,CAAC;IAClBL,YAAY,CAACM,OAAO,CAAC,MAAM,EAAEJ,IAAI,CAACK,SAAS,CAACF,QAAQ,CAAC,CAAC;EACxD,CAAC;EAED,MAAMG,OAAO,GAAIC,IAAc,IAAK;IAClC,MAAMC,MAAM,GAAGb,KAAK,CAACc,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKJ,IAAI,CAACI,EAAE,CAAC;IAChD,IAAIH,MAAM,EAAE;MACVN,IAAI,CAACP,KAAK,CAACiB,GAAG,CAACF,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKJ,IAAI,CAACI,EAAE,GAAG;QAAE,GAAGD,CAAC;QAAEG,QAAQ,EAAEH,CAAC,CAACG,QAAQ,GAAGN,IAAI,CAACM;MAAS,CAAC,GAAGH,CAAC,CAAC,CAAC;IAC7F,CAAC,MAAM;MACLR,IAAI,CAAC,CAAC,GAAGP,KAAK,EAAEY,IAAI,CAAC,CAAC;IACxB;EACF,CAAC;EAED,MAAMO,UAAU,GAAIH,EAAU,IAAK;IACjCT,IAAI,CAACP,KAAK,CAACoB,MAAM,CAACL,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKA,EAAE,CAAC,CAAC;EACtC,CAAC;EAED,MAAMK,cAAc,GAAGA,CAACL,EAAU,EAAEM,GAAW,KAAK;IAClDf,IAAI,CAACP,KAAK,CAACiB,GAAG,CAACF,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKA,EAAE,GAAG;MAAE,GAAGD,CAAC;MAAEG,QAAQ,EAAEI;IAAI,CAAC,GAAGP,CAAC,CAAC,CAAC;EACjE,CAAC;EAED,MAAMQ,KAAK,GAAGA,CAAA,KAAM;IAClBhB,IAAI,CAAC,EAAE,CAAC;EACV,CAAC;EAED,oBACEb,OAAA,CAACC,WAAW,CAAC6B,QAAQ;IAACC,KAAK,EAAE;MAAEzB,KAAK;MAAEW,OAAO;MAAEQ,UAAU;MAAEE,cAAc;MAAEE;IAAM,CAAE;IAAAzB,QAAA,EAChFA;EAAQ;IAAA4B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACW,CAAC;AAE3B,CAAC;AAAC9B,EAAA,CAzCWF,YAA+C;AAAAiC,EAAA,GAA/CjC,YAA+C;AA2C5D,OAAO,MAAMkC,OAAO,GAAGA,CAAA,KAAM;EAAAC,GAAA;EAC3B,MAAMC,GAAG,GAAG1C,UAAU,CAACI,WAAW,CAAC;EACnC,IAAI,CAACsC,GAAG,EAAE,MAAM,IAAIC,KAAK,CAAC,0CAA0C,CAAC;EACrE,OAAOD,GAAG;AACZ,CAAC;AAACD,GAAA,CAJWD,OAAO;AAAA,IAAAD,EAAA;AAAAK,YAAA,CAAAL,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}